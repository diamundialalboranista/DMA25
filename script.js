async function loadData(){const res=await fetch('./data/participaciones.json');return await res.json()}
function renderGrid(items){const grid=document.getElementById('grid');grid.innerHTML='';items.forEach(i=>{const li=document.createElement('li');li.className='card';li.innerHTML=`<div class='thumb'>${i.emoji||'ğŸ§³'}</div><div><b>${i.usuario}</b> Â· <small>${i.pais||''}${i.ciudad?' Â· '+i.ciudad:''}</small><p><strong>Objeto:</strong> ${i.objeto}</p><p><em>RazÃ³n de mi viaje:</em> ${i.mensaje}</p></div>`;grid.appendChild(li)});document.getElementById('count').textContent=`${items.length} viajeros`}
function setupFilters(all){function apply(){const q=document.getElementById('search').value.toLowerCase();const c=document.getElementById('country-filter').value;const f=all.filter(i=>{const t=`${i.usuario} ${i.pais} ${i.ciudad} ${i.objeto} ${i.mensaje}`.toLowerCase();return(!q||t.includes(q))&&(!c||i.pais===c)});renderGrid(f)};document.getElementById('search').addEventListener('input',apply);document.getElementById('country-filter').addEventListener('change',apply);apply()}
loadData().then(setupFilters).catch(e=>{console.error(e);})